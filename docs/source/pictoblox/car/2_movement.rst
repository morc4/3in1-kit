.. _sh_move:

3.2 動き
==================

このプロジェクトは :ref:`sh_test` に基づいて車を全方向に移動させるものです。

プログラミングを始める前に、L298Nの動作原理を確認しましょう。

ENAとIN1、IN2の動作関係は以下の通りです。

.. list-table:: 
    :widths: 25 25 25 50
    :header-rows: 1

    * - ENA
      - IN1
      - IN2
      - 右モータ(A)の状態
    * - 0
      - X
      - X
      - 停止
    * - 1
      - 0
      - 0
      - ブレーキ
    * - 1
      - 0
      - 1
      - 時計回りに回転
    * - 1
      - 1
      - 0
      - 反時計回りに回転
    * - 1
      - 1
      - 1
      - ブレーキ

ENBとIN3、IN4の動作関係は次の通りです。

.. list-table:: 
    :widths: 25 25 25 50
    :header-rows: 1

    * - ENB
      - IN3
      - IN4
      - 左モータ(B)の状態
    * - 0
      - X
      - X
      - 停止
    * - 1
      - 0
      - 0
      - ブレーキ
    * - 1
      - 0
      - 1
      - 時計回りに回転
    * - 1
      - 1
      - 0
      - 反時計回りに回転
    * - 1
      - 1
      - 1
      - ブレーキ

プログラミング
-------------------

次に、車が前進、後退、左右回転、及び停止するためのブロックを作成します。

**1. 前進**

右モータは時計回り、左モータは反時計回りに回転して車を前進させます。

.. image:: img/2_forward.png

**2. 後退**

後退はその逆で、右モータは反時計回り、左モータは時計回りに回転が必要です。

.. image:: img/2_backward.png

**3. 左に曲がる**

左右のモータを同時に時計回りに回転させて車を左に曲がらせます。

.. image:: img/2_turn_left.png

**4. 右に曲がる**

同様に、左右のモータを反時計回りに回転させて車を右に曲がらせます。

.. image:: img/2_turn_right.png

**5. 停止**

全モータの設定を0にして車を停止させます。

.. image:: img/2_stop.png

**6. 車を動かす**

車を前進、後退、左右に1秒間動かしてから停止します。すべてのブロックが[Forever]ブロック内に配置されているので、車が上記の動作を繰り返すのを見ることができます。

.. image:: img/2_move.png
