.. _car_move:


1. 移動
===============

.. image:: ../components/img/l298n_pin.jpg
    :width: 400
    :align: center

プログラミングを始める前に、L298Nの動作原理を確認しましょう。

IN1～IN4はL298Nモジュールの入力、OUT1～OUT4は出力です。

これらを使用する簡単な方法は：IN1に高レベルを入力すると、OUT1は高レベルを出力します。IN1に低レベルを入力すると、OUT1は低レベルを出力します。
モータの両端をOUT1とOUT2に接続し、IN1とIN2に逆のレベル信号を入力すると、モータが回転します。OUT3とOUT4も同じ方法で使用できます。

ENAとIN1,IN2の間の動作関係は以下の通りです。

.. list-table:: 
    :widths: 25 25 25 50
    :header-rows: 1

    * - ENA
      - IN1
      - IN2
      - 右モータ(A)の状態
    * - 0
      - X
      - X
      - 停止
    * - 1
      - 0
      - 0
      - ブレーキ
    * - 1
      - 0
      - 1
      - 時計回りに回転
    * - 1
      - 1
      - 0
      - 反時計回りに回転
    * - 1
      - 1
      - 1
      - ブレーキ

ENBとIN3,IN4の間の動作関係は以下の通りです。

.. list-table:: 
    :widths: 25 25 25 50
    :header-rows: 1

    * - ENB
      - IN3
      - IN4
      - 左モータ(B)の状態
    * - 0
      - X
      - X
      - 停止
    * - 1
      - 0
      - 0
      - ブレーキ
    * - 1
      - 0
      - 1
      - 時計回りに回転
    * - 1
      - 1
      - 0
      - 反時計回りに回転
    * - 1
      - 1
      - 1
      - ブレーキ

**必要な部品**

このプロジェクトでは、以下の部品が必要です。

全体のキットを購入するのは確かに便利です、リンクはこちら：

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - 名前
        - このキットのアイテム
        - リンク
    *   - 3 in 1 Starter Kit
        - 380+
        - |link_3IN1_kit|

以下のリンクからそれぞれの部品を個別に購入することもできます。

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - コンポーネントの紹介
        - 購入リンク

    *   - :ref:`cpn_l298n`
        - |link_l298n_buy|

**前進**

L298Nモジュールの入力を直接12VとGNDに接続することで、車を動かしてみましょう。

1. R3ボード、L298Nモジュール、2つのモータを接続します。

.. list-table:: 
    :widths: 25 25 50
    :header-rows: 1

    * - L298N
      - R3ボード
      - モーター
    * - 12V
      - 5V
      - 
    * - GND
      - GND
      - 
    * - OUT1
      - 
      - 右モータの黒線
    * - OUT2
      - 
      - 右モータの赤線
    * - OUT3
      - 
      - 左モータの黒線
    * - OUT4
      - 
      - 左モータの赤線

.. image:: img/1.move_1.png
    :width: 800

2. IN2とIN3を12Vに、IN1とIN4をGNDに接続すると、車が前進するのがわかります。

.. image:: img/1.move_4.png 
    :align: center

両方のモータが前進しない場合、次の状況が発生した場合は、2つのモータの配線を再調整する必要があります。

* 両方のモータが同時に後退する場合（左モータが時計回り、右モータが反時計回り）、左と右のモータの配線を同時に交換します。OUT1とOUT2、OUT3とOUT4を交換します。
* 左モータが後退する場合（時計回り）、左モータのOUT3とOUT4の配線を交換します。
* 右モータが後退する場合（反時計回り）、右モータのOUT1とOUT1の配線を交換します。

**後退**

IN2とIN3をGNDに、IN1とIN4を12Vに接続すると、車が後退するのがわかります。

.. image:: img/1.move_back.png 
    :width: 800

**左折**

車を左に曲げたい場合、すなわち、両方のモータを反対の方向に回転させる場合、IN1を12Vに、IN2をGNDに、IN3をGNDに、IN4を12Vに接続します。

.. image:: img/1.move_left.png 
    :width: 800

**右折**

車を右に曲げたい場合、すなわち、両方のモータを反対の方向に回転させる場合、IN1をGNDに、IN2を12Vに、IN3を12Vに、IN4をGNDに接続します。

.. image:: img/1.move_right.png 
    :width: 800

**停止**

モーターを停止するには、同じ側の入力を同時に12VまたはGNDに接続します。例えば、IN1とIN2を同時に12Vまたは5Vに接続し、IN3とIN4も同様に接続します。



これはもちろん理論的なもので、後にコードで制御する際に必要となる。ここで、車への電源供給を停止することができます削除します。
